(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ShoppingMall/ShoppingMall"],{"08df":function(t,n,o){"use strict";o.r(n);var a=o("be1a"),e=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(n,t,(function(){return a[t]}))}(i);n["default"]=e.a},"4dd8":function(t,n,o){},9116:function(t,n,o){"use strict";o.d(n,"b",(function(){return e})),o.d(n,"c",(function(){return i})),o.d(n,"a",(function(){return a}));var a={topNavigation:function(){return o.e("components/top-navigation/top-navigation").then(o.bind(null,"929a"))},uniSwiperDot:function(){return o.e("components/uni-swiper-dot/uni-swiper-dot").then(o.bind(null,"331b"))},uniLoadMore:function(){return o.e("components/uni-load-more/uni-load-more").then(o.bind(null,"78a3"))},shoppingCart:function(){return o.e("components/shopping-cart/shopping-cart").then(o.bind(null,"d72a"))}},e=function(){var t=this,n=t.$createElement;t._self._c},i=[]},a168:function(t,n,o){"use strict";var a=o("4dd8"),e=o.n(a);e.a},afd4:function(t,n,o){"use strict";o.r(n);var a=o("9116"),e=o("08df");for(var i in e)"default"!==i&&function(t){o.d(n,t,(function(){return e[t]}))}(i);o("a168");var s,d=o("f0c5"),r=Object(d["a"])(e["default"],a["b"],a["c"],!1,null,"6fa7e12a",null,!1,a["a"],s);n["default"]=r.exports},be1a:function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){o.e("components/uni-load-more/uni-load-more").then(function(){return resolve(o("78a3"))}.bind(null,o)).catch(o.oe)},e=function(){o.e("components/shopping-cart/shopping-cart").then(function(){return resolve(o("d72a"))}.bind(null,o)).catch(o.oe)},i={components:{uniLoadMore:a,shoppingCart:e},data:function(){return{reload:!1,status:"more",contentText:{contentdown:"上拉加载更多~",contentrefresh:"加载中",contentnomore:"已经没有更多啦~"},searchValue:"",titleActive:0,titleList:[],imgUrl:this.$imgUrl,current:0,info:[],form:{goods_name:"",class_id:"",offset:1,limit:4},total:0,dataList:[]}},onLoad:function(){this._getGoodsClassList(),this._getGoodsList(1),this._getGoodsBanner()},onReachBottom:function(){var t=this;this.totalCount>this.dataList.length?(this.status="loading",setTimeout((function(){t.form.offset++,t._getGoodsList(2)}),1e3)):this.status="noMore"},methods:{_getGoodsBanner:function(){var n=this;t.showLoading({title:"加载中"}),this.$member.post("Order/get_goods_banner").then((function(o){t.hideLoading(),200==o.data.code&&(n.info=o.data.data)})).catch((function(t){}))},_getGoodsClassList:function(){var n=this;t.showLoading({title:"加载中"}),this.$member.post("Order/get_goods_class_list",this.form).then((function(o){t.hideLoading(),200==o.data.code?(n.titleList=o.data.data,n.titleList.splice(0,0,{id:"",class_name:"全部商品"})):t.showToast({icon:"none",title:o.data.msg,duration:2e3})})).catch((function(t){}))},_getGoodsList:function(n){var o=this;1==n&&t.showLoading({title:"加载中"}),this.$member.post("Order/get_goods_list",this.form).then((function(a){if(1==n&&t.hideLoading(),200==a.data.code){if(o.total=a.data.data.total,o.totalCount=a.data.data.total,a.data.data.total>0){var e=a.data.data.rows;o.dataList=o.reload?e:o.dataList.concat(e),o.reload=!1}else o.dataList=[];o.totalCount==o.dataList.length&&(o.reload=!1,o.status="noMore")}else t.showToast({icon:"none",title:a.data.msg,duration:2e3})})).catch((function(t){}))},returnClick:function(){t.switchTab({url:"../member/index"})},change:function(t){this.current=t.detail.current},titleClick:function(t){this.titleActive=t,this.form.class_id=this.titleList[t].id,this.form.offset=1,this.reload=!0,this._getGoodsList(1)},addCart:function(n){var o=this;t.showLoading({title:"加载中"});var a={goods_id:n,quantity:1};this.$member.post("Order/add_cart",a).then((function(n){t.hideLoading(),200==n.data.code?(o.$store.commit("cart/setCartCount",n.data.data.sum),t.showToast({icon:"none",title:n.data.msg,duration:2e3})):t.showToast({icon:"none",title:n.data.msg,duration:2e3})})).catch((function(t){}))},addWishlist:function(n,o,a){var e=this;t.showLoading({title:"加载中"});var i={goods_id:n,type:o};this.$member.post("Order/add_to_wishlist",i).then((function(n){t.hideLoading(),t.showToast({icon:"none",title:n.data.msg,duration:2e3}),200==n.data.code&&(e.dataList[a].is_collect=2==o?0:1)}))},toSearch:function(){if(!this.searchValue)return!1;t.navigateTo({url:"../../pagesMall/Search/Search?value="+this.searchValue})},toDetails:function(n){t.navigateTo({url:"../../pagesMall/ProductDetails/ProductDetails?id="+n})}}};n.default=i}).call(this,o("543d")["default"])},d647:function(t,n,o){"use strict";(function(t){o("fd9e");a(o("66fd"));var n=a(o("afd4"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("543d")["createPage"])}},[["d647","common/runtime","common/vendor"]]]);